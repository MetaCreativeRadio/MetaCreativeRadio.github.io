# Rich UX Design — 縦スクロールで「読む」を発明する

## この文書について

メタクリドキュメントの Rich HTML 版において、「縦にスクロールしながら読む気持ちよさ」を追求するための設計思想・テクニック・検証基準を記述する。

Standard HTML がメタクリドキュメントの「正確な再現」であるのに対し、Rich HTML は「読む体験の再設計」である。見た目のリッチさだけでなく、**ユーザーの認知プロセスに介入するインタラクション設計**がRichの本質である。

---

## 1. 解決すべき課題

### 1.1 「視線移動による読みの崩壊」

ある読者の証言:

> 長い文章読めない人は視線移動しちゃって意味がとれないのよ
> これ、読める人でも体調によるんだけど、「読めてない」ときって、視線移動しちゃうんだよね

> 長文が読めない人は、前を行ったり来たりしてしまいます

この現象は3つのレイヤーで発生する:

| レイヤー | 何が起きているか | いつ起きるか |
|---------|----------------|------------|
| **行内** | 同じ行を読み直す。隣の行に飛ぶ | 行が長い、行間が狭い時 |
| **段落内** | 文の途中で先の文が目に入る | 段落が長く、内容密度が高い時 |
| **段落間** | 下に見えている別の塊に意識が引っ張られる | テキストが画面に多く存在する時 |

### 1.2 「テキスト→ビジュアル変換」の認知コスト

テキストを読む際に脳内で視覚的なイメージに変換する認知特性を持つ読者がいる。抽象的な議論が続くとこの変換にリソースを奪われ、内容理解に到達する前に疲弊する。図解・視覚的サマリーがあると、この変換コストが大幅に軽減される。

### 1.3 Standard版の限界

Standard HTML は忠実な文書再現として優れているが、大量のテキストが一度に表示される構造は上記の課題を内包している。Rich HTML はこの問題に対してクリエイティブの力で回答を出す場である。

---

## 2. 設計原則

### 2.1 「スクロールが読むを操作する」

Rich HTML の中核思想。ユーザーがスクロールする行為そのものが、テキストの可読性を制御する。スクロールを止めれば読める。スクロールを進めれば次が現れる。**受動的に「見える」のではなく、能動的に「読みに行く」感覚**を作る。

### 2.2 「先を見せない、でも閉じ込めない」

先の内容を物理的に見えにくくすることで視線移動を防ぐ。ただし、完全に隠す（display: none）のではなく、うっすらと存在を感じさせる。「この先にまだ続きがある」という安心感と、「でも今はこの段落に集中していい」という許可を同時に与える。

### 2.3 「休憩を設計する」

テキストとテキストの間に、意図的な「何もない時間」を作る。等間隔のマージンではなく、文脈の切れ目に応じた不等間隔の呼吸空間。読者の脳が前の情報を処理する時間を確保する。

### 2.4 「変換を代行する」

抽象的なテキストの後に、その内容を視覚的に要約した図解を挿入する。読者の脳が行う「テキスト→ビジュアル変換」を、コンテンツ側で先回りして提供する。装飾ではなく、認知補助としての図解。

---

## 3. テクニック仕様

### 3.1 パラグラフ・スポットライト

**対応する課題**: 段落間の視線移動
**設計原則**: 2.2「先を見せない、でも閉じ込めない」

#### 概要

ビューポート中央付近の要素だけを完全な可読状態（`opacity: 1`）にし、それ以外の要素をフェードダウンする。スクロールに連動してスポットライトが滑らかに移動する。

**設計の核心: 「効いているけど気づかない」**。効果が強すぎるとユーザーに違和感を与え、UX向上を超えて邪魔になる。さりげなさと効果のバランスが最重要。

#### 挙動の詳細（モバイル）

```
[opacity: 0.20] ← 読み終わった要素（穏やかにフェードアウト）
[opacity: 0.25]
[opacity: 0.50] ← 退場中の要素（急な断絶を避ける）
[opacity: 1.0]  ← 今読んでいる要素（完全に可読）30%-70%
[opacity: 0.70] ← 入場中の要素（blur 0.3px — ほのかに）
[opacity: 0.20] ← まだ読んでいない要素（blur 1px — 存在は感じる）
[opacity: 0.20]
```

- **可読ゾーン**: ビューポート通過の30%〜70%（モバイル）、25%〜75%（PC）
- **最小opacity**: 0.2（モバイル）、0.35（PC）— コンテンツが「消えない」
- **最大blur**: 1px（モバイル）、0.5px（PC）— さりげないヒント
- 退場は段階的: 70% → 80%(0.5) → 90%(0.25) → 100%(0.2)。崖のように落ちない

#### モバイル / PC パラメータ比較

| パラメータ | モバイル | PC |
|-----------|---------|-----|
| 可読ゾーン | 30%-70% | 25%-75% |
| 最小opacity | 0.2 | 0.35 |
| 最大blur | 1px | 0.5px |
| スライド量 | 16px | 12px |
| translateY | 6px | 4px |

PCはビューポートが大きく周辺視野が広いため、モバイルより控えめにする。エフェクトが目立つとデスクトップの読書体験を損なう。

#### 実装方針

**CSS scroll-driven animation（推奨）**:
```css
.spotlight-target {
  animation: spotlight linear both;
  animation-timeline: view();
  animation-range: entry 0% exit 100%;
}

/* モバイル */
@keyframes spotlight {
  0%   { opacity: 0.2;  filter: blur(1px);   transform: translateY(6px); }
  12%  { opacity: 0.2;  filter: blur(1px);   transform: translateY(6px); }
  25%  { opacity: 0.7;  filter: blur(0.3px); transform: translateY(1px); }
  30%  { opacity: 1;    filter: blur(0);     transform: translateY(0); }
  70%  { opacity: 1;    filter: blur(0);     transform: translateY(0); }
  80%  { opacity: 0.5;  filter: none;        transform: none; }
  90%  { opacity: 0.25; filter: none;        transform: none; }
  100% { opacity: 0.2;  filter: none;        transform: none; }
}

/* PC (min-width: 1024px) */
@keyframes spotlight {
  0%   { opacity: 0.35; filter: blur(0.5px); transform: translateY(4px); }
  10%  { opacity: 0.35; filter: blur(0.5px); transform: translateY(4px); }
  20%  { opacity: 0.8;  filter: blur(0);     transform: translateY(0); }
  25%  { opacity: 1;    filter: blur(0);     transform: translateY(0); }
  75%  { opacity: 1;    filter: blur(0);     transform: translateY(0); }
  85%  { opacity: 0.6;  filter: none;        transform: none; }
  95%  { opacity: 0.35; filter: none;        transform: none; }
  100% { opacity: 0.35; filter: none;        transform: none; }
}
```

**フォールバック（JSベース）**: IntersectionObserverで `rootMargin` を設定し、ビューポート中央付近の要素のみ `opacity: 1` クラスを付与。

**フォールバック（JS無効）**: 全要素 `opacity: 1`（Standard相当の表示）。

#### 適用対象

- 導の文（guide-text）
- 対話ブロック（dialogue-block）内の個々の発言
- 註釈ブロック（annotation）
- ハイライトボックス
- プルクォート

#### 適用しない対象

- ヒーローセクション（常に完全表示）
- チャプターヘッダー（ナビゲーション用途のため常に視認可能）
- 図解・コンセプトダイアグラム（視覚要素は常に見えていい）
- フッター

#### 検証基準

- [ ] スクロールを止めた状態で、画面中央の段落が `opacity: 1` であること
- [ ] 画面上端・下端の段落がフェードダウンしていること（モバイル: opacity 0.2、PC: 0.35）
- [ ] スクロール中に不自然なちらつき（フリッカー）が発生しないこと
- [ ] 高速スクロール時にもスポットライトが追従すること
- [ ] JS無効時に全テキストが読める状態で表示されること
- [ ] iPhone Safari / Android Chrome で動作すること

---

### 3.2 遅延出現 + blur-to-sharp

**対応する課題**: 段落内・段落間の先読み防止
**設計原則**: 2.1「スクロールが読むを操作する」

#### 概要

要素がビューポートに入った瞬間から即座に可読になるのではなく、**スクロール位置に応じて** blur + 低opacity → sharp + 高opacity へ遷移する。時間ベースではなくスクロール位置ベースのアニメーション。

**注意: blur-to-sharp は独立テクニックではなく、スポットライト（3.1）のentry部分として統合実装されている。** スポットライトのキーフレーム 0%〜30%（モバイル）/ 0%〜25%（PC）がblur-to-sharpに相当する。

#### 挙動の詳細

- 要素がビューポート下端から12%入った時点: `blur(1px)` + `opacity: 0.2`（存在は感じるが読めない）
- 25%で `opacity: 0.7` + `blur(0.3px)`（ほぼ読めるが完全ではない）
- 30%で完全にシャープ・可読（スポットライトの可読ゾーンに合流）
- PCではblurは `0.5px` まで、opacityは `0.35` から。よりさりげない
- この間のスクロール量で変化が起きるため、ユーザーがスクロールを止めれば変化も止まる
- 「ワンテンポ遅い出現」ではなく「スクロールで可読性を操作している」感覚

#### 実装方針

スポットライト（3.1）のキーフレームに統合済み。entry部分を抜粋:

```css
/* スポットライトのentry部分 = blur-to-sharp */
@keyframes spotlight {
  0%   { opacity: 0.2;  filter: blur(1px);   transform: translateY(6px); }
  12%  { opacity: 0.2;  filter: blur(1px);   transform: translateY(6px); }
  25%  { opacity: 0.7;  filter: blur(0.3px); transform: translateY(1px); }
  30%  { opacity: 1;    filter: blur(0);     transform: translateY(0); }
  /* ... 可読ゾーン + exit ... */
}
```

旧仕様の独立実装（参考）:
```css
@keyframes blur-to-sharp {
  from {
    opacity: 0.2;
    filter: blur(1px);
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    filter: blur(0);
    transform: translateY(0);
  }
}
```

#### 3.1との組み合わせ

パラグラフ・スポットライト（3.1）は「可読ゾーンの定義」、blur-to-sharp（3.2）は「可読ゾーンへの入場演出」。両方を重ねると:

1. 画面下部で blur + 低opacity（存在は感じるが読めない）
2. スクロールで中央に近づくにつれ sharp + 高opacity
3. 中央の可読ゾーンで完全にクリア
4. 上に流れると再び低opacityへ（blurは不要、フェードだけで十分）

#### 検証基準

- [ ] 要素のビューポート進入時に、blurがさりげなく（意識しないと気づかない程度に）かかっていること
- [ ] スクロールを途中で止めた時、blurが中間状態で保持されること（時間経過で勝手に解除されないこと）
- [ ] blur → sharp の遷移がスムーズで、ステップ的なガクつきがないこと
- [ ] `filter: blur()` によるパフォーマンス低下がないこと（特にモバイル）
- [ ] 低性能端末でblurが重い場合、opacityのみにフォールバックすること

---

### 3.3 コンテンツの呼吸間隔

**対応する課題**: 認知負荷の蓄積
**設計原則**: 2.3「休憩を設計する」

#### 概要

要素間のマージンを等間隔ではなく、文脈の切れ目に応じた3段階のリズムで設計する。

#### リズム定義

| リズム | 間隔 | いつ使うか | 視覚的サイン |
|-------|------|----------|------------|
| **呼吸（Breath）** | `2rem` | 同じ話題内の要素間。対話の発言と発言の間 | なし（間隔のみ） |
| **間（Ma）** | `4rem` | 話題の小さな転換点。導の文と対話ブロックの間 | 薄い線、小さなドット、微細な区切り |
| **転（Ten）** | `6〜8rem` | チャプターの転換。大きな視点の切り替え | 背景色のシフト（atmosphere変化）、装飾的な区切り線 |

#### 「間」のビジュアル候補

- 中央に配置された小さなドット3つ `· · ·`
- 極細の横線（`border-top: 1px solid` で opacity 0.15 程度）
- 何もない空白そのもの（間隔の広さが区切りを暗示）

#### 等間隔を避ける理由

等間隔のマージンは脳に「パターン」として処理される。パターン化されると個々のブロックの境界が意識に上がらなくなり、テキストが一続きの塊に見え始める。不等間隔は「ここで一度区切りがある」というシグナルを脳に送り、前の情報を処理する時間を確保する。

#### 検証基準

- [ ] 3段階のリズムが視覚的に区別できること
- [ ] 「呼吸」の間隔で要素が密集して見えないこと
- [ ] 「転」の間隔がスクロール体験を断絶させないこと（空きすぎない）
- [ ] モバイルでは間隔をやや圧縮しても3段階が保たれること

---

### 3.4 文脈可視化（絵文字・図解インジェクション）

**対応する課題**: テキスト→ビジュアル変換の認知コスト
**設計原則**: 2.4「変換を代行する」

#### 概要

テキストだけの段落が3つ以上続く場面で、直前の内容を視覚的に要約した図解を挟む。装飾ではなく「認知補助」としての図解。

#### 図解の種類

**A. フローダイアグラム**

抽象的なプロセスや因果関係を絵文字 + 矢印で表現。

```
🧠 認知 ──→ 💡 気づき ──→ 🎨 表現 ──→ 🔄 フィードバック
```

HTMLの flexbox で実装。各ステップはカードとして `padding`, `border-radius`, `background` を持つ。矢印は `→` 文字か CSS疑似要素。

**B. 対比ダイアグラム**

2つの概念の対比を左右に配置。

```
┌─────────────┐    ┌─────────────┐
│ 🏗️ 設計主義  │ vs │ 🧩 ブリコラージュ │
│ 計画→実行   │    │ 手元→発見    │
│ ゴールが先   │    │ 素材が先     │
└─────────────┘    └─────────────┘
```

**C. 感情・強度マーカー**

対話の転換点に、大きめの絵文字を1つ置く。「ここで話が変わった」というシグナル。

```html
<div class="emotion-marker">💡</div>
```

中央寄せ、`font-size: 2.5rem`、上下 `3rem` マージン。

**D. キーワードマップ**

議論に登場した重要概念を空間的に配置。

```
        メタ認知
       ↗       ↘
  ブリコラージュ ←→ 創造性
       ↘       ↗
        偶然性
```

#### 挿入ルール

1. テキスト段落が3ブロック以上連続したら、図解の挿入を検討する
2. 図解は直前のテキスト内容の「視覚的サマリー」であること
3. 図解だけ見ても文脈が分かるレベルを目指す
4. 図解を飛ばしても文意は通るようにする（補助であって本文ではない）
5. 1つのチャプターに2〜3個が目安。多すぎると逆にノイズになる

#### 検証基準

- [ ] 図解がなくても文意が通ること（補助であることの確認）
- [ ] 図解だけ見て、直前の議論の概要が掴めること
- [ ] モバイルで図解がはみ出さない・崩れないこと
- [ ] 絵文字がOS間で大きく印象が変わらないこと（基本的な絵文字を使う）

---

### 3.5 プログレスの体感設計

**対応する課題**: 「あとどれくらいか」の不安による先読みスキャン
**設計原則**: 2.1「スクロールが読むを操作する」

#### 概要

読み進めている感覚を増幅し、「先に進みたい不安」を「進んでいる快感」に変換する。

#### テクニック

**A. チャプターコンテキスト表示**（既存の拡張）

プログレスバーに現在のチャプター名と全体の位置を表示する。既存の `data-chapter-name` + `progress-chapter` を活用。

```
[====・・・・・・・・・] Chapter 2 / 5 — ブリコラージュの本質
```

**B. スクロールバー非表示**

ブラウザのデフォルトスクロールバーを隠すことで、「残量」の視覚的ヒントを消す。プログレスバーが唯一の進捗インジケーターになる。

```css
html {
  scrollbar-width: none;           /* Firefox */
}
html::-webkit-scrollbar {
  display: none;                   /* Chrome, Safari */
}
```

**C. チャプター到達マイクロ演出**

新しいチャプターに到達した時、背景色のatmosphereシフト（既存実装）に加えて、プログレスバーの色が一瞬だけアクセントカラーに光る。「ここまで来た」という達成感の微細な演出。

#### 検証基準

- [ ] プログレスバーのチャプター情報が正確に更新されること
- [ ] スクロールバー非表示がユーザビリティを損なわないこと（プログレスバーが代替として機能する）
- [ ] チャプター到達演出が控えめであること（注意を奪わない）

---

## 4. テクニック間の相互作用

### 4.1 統合された読書体験のフロー

```
新しいセクションにスクロール
        │
        ▼
[blur + 低opacity] ← 3.2 blur-to-sharp: 存在は感じるが読めない
        │
     スクロール継続
        │
        ▼
[sharp + 高opacity] ← 3.1 スポットライト: 可読ゾーンに入る
        │
     読む
        │
        ▼
[低opacity]        ← 3.1 スポットライト: 読み終わると退場
        │
        ▼
[呼吸 or 間 or 転] ← 3.3 呼吸間隔: 文脈に応じた休憩
        │
        ▼
[図解]             ← 3.4 文脈可視化: テキストの視覚的サマリー（必要な場合）
        │
        ▼
[プログレス更新]   ← 3.5 体感設計: 進んでいる感覚
        │
     次の段落へ
```

### 4.2 レイヤーの独立性

各テクニックは独立してON/OFFできるように設計する。

| テクニック | 無効にした場合 | 依存関係 |
|-----------|--------------|---------|
| 3.1 スポットライト | 全要素が常に `opacity: 1` | なし |
| 3.2 blur-to-sharp | 即時出現（現行の fade-in に近い） | なし |
| 3.3 呼吸間隔 | 等間隔マージン | なし |
| 3.4 文脈可視化 | 図解なし（テキストのみ） | なし |
| 3.5 プログレス体感 | 既存のプログレスバーのまま | なし |

全て無効にすると、現行の Standard HTML + 基本的なスクロール出現に近い体験になる。

---

## 5. ブラウザ互換性とフォールバック

### 5.1 CSS scroll-driven animation のサポート状況

| ブラウザ | `animation-timeline: view()` | フォールバック |
|---------|------------------------------|--------------|
| Chrome / Edge | 安定サポート | — |
| Safari | サポート済み | — |
| Firefox | フラグ背後（`layout.css.scroll-driven-animations.enabled`） | JS ベースの IntersectionObserver |

### 5.2 フォールバック戦略

```
Level 1: CSS scroll-driven animation（推奨）
  ↓ 非対応の場合
Level 2: IntersectionObserver + CSS transition（JS フォールバック）
  ↓ 非対応の場合
Level 3: 全要素 opacity: 1（完全フォールバック = Standard相当）
```

### 5.3 パフォーマンス考慮

- `filter: blur()` はGPU合成レイヤーを生成するため、モバイルで多用するとバッテリー消費が増える
- 低性能端末では blur を省略し、opacity のみでスポットライト効果を実現する
- 画面内の blur 要素は同時に3〜4個以下に抑える
- `will-change: opacity, filter` を静的に設定せず、アニメーション中のみ付与する

---

## 6. 実装状況（正式仕様: rich-ep19-travel.html）

### 6.1 進化の経緯

| 機能 | v1（Ep.12 初期） | v2（Ep.12 調整後） | **正式仕様（Ep.19）** |
|-----|------|-------|-------|
| 出現アニメーション | 10%進入で0.7s fade-in | スクロール位置ベースのspotlight統合 | **PC/モバイル完全分岐** |
| PC版 | なし | なし | **IO 70%トリガー、0.85s base、要素別モーション** |
| モバイル版 | fade-in | spotlight統合 | **scroll-driven animation** |
| スポットライト（モバイル） | なし | 可読ゾーン30-70% | 30-70%、opacity 0.2、blur 1px |
| PC フォールバック | — | — | **opacity 0.35、blur 0.5px、可読ゾーン 25-75%** |
| 対話スライドイン | 左右交互 30px | 左右交互 16px（モバイル） | **モバイル 16px / PC 60px** |
| annotation duration | — | — | **1.3s（他の0.85sより重厚）** |
| breathing delay | — | — | **0.2s / 0.18s** |
| 註釈の段階開示 | 60%進入で自動展開 | 60%進入で自動展開 | **クリック展開のみ（自動展開廃止）** |
| ヒーローミニプレーヤー | なし | なし | **Spotify ミニプレーヤー追加** |
| atmosphere shift | セクション別の背景色変化 | 同左 | 同左（`0.8s` transition） |

### 6.2 チューニング履歴

| 日付 | 変更 | 理由 |
|------|------|------|
| 2026-02-05 初回 | opacity 0.08, blur 2px, sharp zone 40-60% | 初期プロトタイプ（Ep.12） |
| 2026-02-05 調整 | opacity 0.2, blur 1px, sharp zone 30-70% | ユーザーFB: 「Sharpをもう少し広く」「さりげなさがポイント」 |
| 同上 | PC: opacity 0.35, blur 0.5px, sharp zone 25-75% | ユーザーFB: 「PCも強調しすぎると違和感」 |
| 2026-02-07 | PC版: 0.85s base, annotation 1.3s, breathing delay 0.2s/0.18s | **Ep.19で正式仕様化** |
| 同上 | アノテーション自動展開を廃止、クリック展開のみに | ユーザーFB: 意図しないタイミングで開いてしまう |
| 同上 | ヒーローミニプレーヤー追加 | Ep.19で導入、正式仕様化 |

### 6.3 維持する既存メカニクス

以下は現行実装が既に効果的であり、変更しない:

- **対話の左右交互スライドイン**: 対話のリズム感に貢献している
- **atmosphere shift（背景色変化）**: チャプター間の「転」に相当する機能を果たしている
- **ヒーローセクション**: 導入演出として完成度が高い
- **固定ドットTOC**: ナビゲーション機能として維持
- **html.reveal-ready フォールバックパターン**: WebView対応として必須

---

## 7. 検証計画

### 7.1 プロトタイプ段階

1. 既存の rich-ep12-bricolage.html をベースに、テクニック #3.1（スポットライト）のみを追加したバージョンを作成
2. iPhone Safari で実機確認
3. 「先の文章が目に入らない」効果が体感できるか評価

### 7.2 段階的追加

| Step | 追加するテクニック | 検証ポイント |
|------|-------------------|------------|
| Step 1 | 3.1 スポットライト | 視線移動の抑制効果 |
| Step 2 | 3.2 blur-to-sharp | 出現の自然さ、パフォーマンス |
| Step 3 | 3.3 呼吸間隔 | リズムの体感、間延び感の有無 |
| Step 4 | 3.4 文脈可視化 | 理解の補助効果、ノイズ感の有無 |
| Step 5 | 3.5 プログレス体感 | 読み進める快感の向上 |

各ステップで「前のステップより良くなったか」を確認してから次に進む。

### 7.3 最終検証チェックリスト

- [ ] JS無効でも全コンテンツが読めること
- [ ] iPhone Safari で全テクニックが動作すること
- [ ] Android Chrome で全テクニックが動作すること
- [ ] メッセンジャー等の WebView で致命的問題がないこと
- [ ] 高速スクロール時にコンテンツが「見えない」状態が長く続かないこと
- [ ] 読み終わった後に、内容を思い出せること（体感的な確認）

---

## 用語集

| 用語 | 定義 |
|-----|------|
| **スポットライト** | ビューポート中央付近の要素のみを可読状態にするテクニック |
| **可読ゾーン** | opacity: 1 かつ blur: 0 で、テキストが完全に読める状態の画面領域 |
| **呼吸（Breath）** | 同じ文脈内の要素間の小さな間隔（2rem） |
| **間（Ma）** | 文脈の小さな転換点に置く中程度の間隔（4rem） |
| **転（Ten）** | チャプター転換の大きな間隔（6〜8rem） |
| **文脈可視化** | テキスト内容を絵文字・図解で視覚的に要約するテクニック |
| **blur-to-sharp** | スクロール位置に応じてぼけた状態からシャープに遷移する出現アニメーション |
| **atmosphere shift** | セクションに応じて背景色が滑らかに変化する既存メカニクス |

---

**Version**: 1.2
**Created**: 2026-02-05
**Last Updated**: 2026-02-07（Ep.19正式仕様反映: PC/モバイル分岐アニメーション、annotation クリック展開、ヒーローミニプレーヤー）
**Author**: tamkai + Claude Code (Creative Director)
**Related**: [DESIGN_LANGUAGE.md](../DESIGN_LANGUAGE.md), [html-samples/rich-ep19-travel.html](../html-samples/rich-ep19-travel.html)
